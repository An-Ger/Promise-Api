<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <h2 class="page-header">Promise初体验</h2>
      <button id="btn">点击抽奖</button>
      <script>
        function rand(m, n) {
          return Math.ceil(Math.random() * (n - m + 1)) + m - 1;
        }
        const btn = document.getElementById("btn");
        btn.onclick = function () {
          //   setTimeout(() => {
          //     let n = rand(1, 100);
          //     if(n <= 30) alert('success')
          //     else alert('Do It Again')
          //   });
          //使用Promise封装
          const p = new Promise((resolve, reject) => {
            setTimeout(() => {
              let n = rand(1, 100);
              if (n <= 30) resolve(n);
              else reject(n);
            }, 1000);
          });
          p.then(
            (value) => {
              console.log("success" + value);
            },
            (reason) => {
              console.log("Do It Again" + reason);
            }
          );
        };
      </script>
    </div>
  </body>
</html>
